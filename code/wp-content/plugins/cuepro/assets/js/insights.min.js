window.cue=window.cue||{},function(a,b,c){"use strict";function d(){var a,b=e("cue_cid");return b||(b=Math.floor(2147483647*Math.random())+"."+Math.floor(Date.now()/1e3),a=new Date,a.setDate(a.getDate()+365),document.cookie="cue_cid=u"+b+"; expires="+a.toUTCString()+"; path=/"),b}function e(a){var b=new RegExp("(?:(?:^|.*;\\s*)"+a+"\\s*\\=\\s*([^;]*).*$)|^.*$");return document.cookie.replace(b,"$1")}function f(a){var c={};return"cueGetCurrentTrack"in a&&b.extend(c,a.cueGetCurrentTrack()),c.title||(c.title=a.$media.attr("title")),b.extend({},{currentTime:a.media.currentTime,duration:a.media.duration,src:a.media.src,title:c.title||""})}var g,h=a.cue;b.extend(h,{log:function(c){return b.ajax({url:_cueproInsights.routeUrl,type:"POST",data:{action:c.action,client_uid:d(),page_title:b(document).find("title").text(),page_url:a.location.href,target_time:c.time,target_title:c.title,target_url:c.source}})}}),b.extend(MediaElementPlayer.prototype,{buildcueinsights:function(a,b,c,d){var e={},i=!1;"AUDIO"===d.tagName&&(a.$media.on("play",_.debounce(function(b){var c=e.play||0,d=f(a),g=Math.round(d.currentTime);(!a.cueAutoResume||c)&&g<2&&(h.log({action:"play",source:d.src,time:g<2?0:g,title:d.title}),i=!1),e.play=c+1},250)),a.$media.on("timeupdate",function(b){var c,e=.2*d.duration;g<e&&d.currentTime>e&&(c=f(a),h.log({action:"listen",source:c.src,time:Math.round(c.currentTime),title:c.title})),g=d.currentTime}),a.$node.on("skipNext.cue",function(a,b,c){i||h.log({action:"skip",source:b.src,time:Math.round(b.currentTime),title:c.title||""}),i=!0}),a.$media.on("ended",function(b){var c=f(a);h.log({action:"complete",source:c.src,time:Math.round(c.duration),title:c.title})}),a.$media.on("seeked",function(b){var c=e.seek||0,d=f(a),g=Math.round(d.currentTime);g>1&&(!a.cueAutoResume||c),e.seek=c+1}),a.$media.on("pause",_.debounce(function(b){var c=f(a);Math.round(c.currentTime),Math.round(c.duration)},250)))}});var i=mejs.MediaElementPlayer.prototype.init;if(mejs.MediaElementPlayer.prototype.init=function(){-1===b.inArray("cueinsights",this.options.features)&&this.options.features.unshift("cueinsights"),i.call(this)},"WPPlaylistView"in a){var j=a.WPPlaylistView.prototype.renderCurrent;a.WPPlaylistView.prototype.renderCurrent=function(){j.apply(this,arguments),b(this.playerNode).attr("title",this.current.get("title"))}}}(window,jQuery);