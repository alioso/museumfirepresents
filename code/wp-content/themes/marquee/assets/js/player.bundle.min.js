require=function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){(function(b){"use strict";var c,d,e,f,g,h="undefined"!=typeof window?window.jQuery:"undefined"!=typeof b?b.jQuery:null,i=a("app")("marquee"),j=h("body"),k=JSON.parse(h("#site-player-settings").html()),l=i.settings(_marqueePlayerSettings);i.views.CurrentTrackDetails=a("./views/player/current-track-details"),i.views.PlayPauseButton=a("./views/player/play-pause-button"),i.views.Player=a("./views/player/player"),i.views.Playlist=a("./views/player/playlist"),i.views.Track=a("./views/player/track"),i.views.VolumePanel=a("./views/player/volume-panel"),i.views.VolumeSlider=a("./views/player/volume-slider"),g=new i.collections.Tracks(k.tracks),new i.views.Panel({el:document.getElementById("site-player-panel"),controller:i.playerPanel,closeOn:"swiperight"}),new i.views.PanelToggleButton({controller:i.playerPanel,el:document.getElementById("site-player-toggle")}),e=i.players.marquee=new i.controllers.Player({},{id:"site-player",mejsPluginPath:l.mejs.pluginPath,persist:!0,players:i.players,signature:k.signature,tracks:g}),e.fetch(),e.listenTo(e.tracks,"remove",function(){this.tracks.length<1&&this.tracks.add(k.tracks)}),c=new i.views.CurrentTrackDetails({controller:e}),d=new i.views.PlayPauseButton({controller:e,l10n:i.l10n}),f=new i.views.Player({controller:e,l10n:i.l10n}),h("#site-player-panel").append(f.render().$el),j.append(c.render().$el),j.append(d.render().$el)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./views/player/current-track-details":2,"./views/player/play-pause-button":3,"./views/player/player":4,"./views/player/playlist":5,"./views/player/track":6,"./views/player/volume-panel":7,"./views/player/volume-slider":8,app:"app"}],2:[function(a,b,c){(function(c){"use strict";var d,e=a("app")("marquee"),f="undefined"!=typeof window?window.Backbone:"undefined"!=typeof c?c.Backbone:null;d=f.View.extend({className:"site-current-track-details",tagName:"div",template:e.template("site-current-track-details"),initialize:function(a){this.controller=a.controller,this.listenTo(this.controller,"change:currentTime",this.updateCurrentTime),this.listenTo(this.controller,"change:track",this.updateDetails),this.listenTo(this.controller,"change:duration",this.updateDuration)},render:function(){var a=this.controller.currentTrack.toJSON();return a.artist=this.getCurrentArtist(),this.$el.html(this.template(a)),this.$artist=this.$el.find(".artist"),this.$currentTime=this.$el.find(".current-time"),this.$duration=this.$el.find(".duration"),this.$title=this.$el.find(".title"),this.updateCurrentTime(),this.updateDetails(this.controller.currentTrack),this.updateDuration(),this},getCurrentArtist:function(){var a=this.controller.currentTrack;return a.get("artist")||a.get("meta").artist||""},updateCurrentTime:function(){var a=this.controller.get("currentTime"),b=mejs.Utility.secondsToTimeCode(a,!1);this.$currentTime.text(b)},updateDetails:function(){this.$artist.text(this.getCurrentArtist()),this.$title.text(this.controller.currentTrack.get("title"))},updateDuration:function(){var a=mejs.Utility.secondsToTimeCode(this.controller.get("duration"),!1);this.$duration.text(a)}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{app:"app"}],3:[function(a,b,c){(function(a){"use strict";var c,d="undefined"!=typeof window?window.Backbone:"undefined"!=typeof a?a.Backbone:null;c=d.View.extend({className:"site-play-pause-button",tagName:"button",events:{click:"togglePlayback"},initialize:function(a){this.controller=a.controller,this.l10n=a.l10n,this.listenTo(this.controller,"change:status",this.updateStatus)},render:function(){return this.updateStatus(),this},togglePlayback:function(){"playing"===this.controller.get("status")?this.controller.pause():this.controller.play()},updateStatus:function(){var a="playing"===this.controller.get("status");this.$el.text(a?this.l10n.pause:this.l10n.play).toggleClass("play",!a).toggleClass("pause",a)}}),b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],4:[function(a,b,c){(function(c){"use strict";var d,e="undefined"!=typeof window?window._:"undefined"!=typeof c?c._:null,f=a("app")("marquee"),g="undefined"!=typeof window?window.Backbone:"undefined"!=typeof c?c.Backbone:null,h=a("./playlist"),i=a("./volume-panel");d=g.View.extend({className:"site-player",tagName:"div",template:f.template("site-player"),events:{"click .next":"nextTrack","click .play-pause":"togglePlayback","click .previous":"previousTrack","click .progress-bar":"seek","click .repeat":"toggleRepeatStatus","click .shuffle":"toggleShuffle","click .volume-bar":"changeVolume"},initialize:function(a){this.controller=a.controller,this.l10n=e.extend({disableRepeat:"Disable Repeat",disableShuffle:"Disable Shuffle",mute:"Mute",pause:"Pause",play:"Play",repeat:"Repeat",shuffle:"Shuffle",unmute:"Unmute"},a.l10n),this.listenTo(this.controller,"change:currentTime",this.updateProgress),this.listenTo(this.controller,"change:duration",this.updateDuration),this.listenTo(this.controller,"change:repeat",this.updateRepeatStatus),this.listenTo(this.controller,"change:shuffle",this.updateShuffle),this.listenTo(this.controller,"change:status",this.updateStatus),this.listenTo(this.controller.tracks,"add remove reset",this.updateTracksCount)},render:function(){return this.$el.html(this.template(this.controller.currentTrack.toJSON())),this.$controls=this.$el.find(".controls"),this.$currentTime=this.$el.find(".current-time"),this.$duration=this.$el.find(".duration"),this.$playBar=this.$el.find(".play-bar"),this.$playPause=this.$el.find(".play-pause"),this.$progressBar=this.$el.find(".progress-bar"),this.$repeat=this.$el.find(".repeat"),this.$shuffle=this.$el.find(".shuffle"),mejs.MediaFeatures.isAndroid||mejs.MediaFeatures.isiOS||this.$controls.append(new i({l10n:this.l10n,parent:this,controller:this.controller}).render().el),this.$el.append(new h({parent:this,controller:this.controller}).render().el),this.updateProgress(),this.updateRepeatStatus(),this.updateShuffle(),this.updateStatus(),this.updateTracksCount(),this},changeVolume:function(a){var b=a.pageX-this.$volumeBar.offset().left,c=b/this.$volumeBar.outerWidth();this.controller.setVolume(Number(c.toFixed(2)))},nextTrack:function(a){this.controller.log({action:"skip"}),this.controller.nextTrack(),this.controller.play()},previousTrack:function(a){this.controller.previousTrack(),this.controller.play()},seek:function(a){var b=this.controller.get("duration"),c=a.pageX-this.$progressBar.offset().left,d=c/this.$progressBar.outerWidth();d=.05>d?0:d,this.controller.setCurrentTime(d*b)},togglePlayback:function(){"playing"===this.controller.get("status")?this.controller.pause():this.controller.play()},toggleRepeatStatus:function(){this.controller.get("repeat")?this.controller.set("repeat",!1):this.controller.set("repeat",!0)},toggleShuffle:function(){this.controller.get("shuffle")?this.controller.set("shuffle",!1):this.controller.set("shuffle",!0)},updateDuration:function(){var a=mejs.Utility.secondsToTimeCode(this.controller.get("duration"),!1);this.$duration.text(a)},updateProgress:function(){var a=this.controller.get("currentTime"),b=mejs.Utility.secondsToTimeCode(a,!1);this.$currentTime.text(b),this.$playBar.width(100*this.controller.getProgress()+"%")},updateRepeatStatus:function(){var a=this.controller.get("repeat"),b=a?this.l10n.disableRepeat:this.l10n.repeat;this.$el.toggleClass("is-repeating",a),this.$repeat.text(b).attr("title",b).toggleClass("is-active",a)},updateShuffle:function(){var a=this.controller.get("shuffle"),b=a?this.l10n.disableShuffle:this.l10n.shuffle;this.$el.toggleClass("is-shuffling",a),this.$shuffle.text(b).attr("title",b).toggleClass("is-active",a)},updateStatus:function(){var a="playing"===this.controller.get("status");this.$el.toggleClass("is-playing",a),this.$playPause.text(a?this.l10n.pause:this.l10n.play).toggleClass("play",!a).toggleClass("pause",a)},updateTracksCount:function(){this.$el.removeClass(function(a,b){return(b.match(/\s?tracks-count-\d+/g)||[]).join(" ")}).addClass("tracks-count-"+this.controller.tracks.length)}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./playlist":5,"./volume-panel":7,app:"app"}],5:[function(a,b,c){(function(c){"use strict";var d,e="undefined"!=typeof window?window.Backbone:"undefined"!=typeof c?c.Backbone:null,f=a("./track");d=e.View.extend({className:"playlist",tagName:"div",initialize:function(a){this.controller=a.controller,this.listenTo(this.controller.tracks,"add",this.addTrack)},render:function(){return this.$el.empty().append('<ol class="tracks-list"></ol>'),this.$tracksList=this.$el.find(".tracks-list"),this.controller.tracks.each(this.addTrack,this),this},addTrack:function(a){this.$tracksList.append(new f({model:a,controller:this.controller}).render().el)}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./track":6}],6:[function(a,b,c){(function(c){"use strict";var d,e=a("app")("marquee"),f="undefined"!=typeof window?window.Backbone:"undefined"!=typeof c?c.Backbone:null;d=f.View.extend({className:"track",tagName:"li",template:e.template("site-player-track"),events:{click:"play","click .js-remove":"destroy"},initialize:function(a){this.controller=a.controller,this.listenTo(this.model,"change:status",this.updateStatus),this.listenTo(this.model,"destroy",this.remove),this.listenTo(this.controller,"change:track",this.updateCurrent),this.listenTo(this.controller,"change:track change:status",this.updateStatus)},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.updateCurrent(),this.updateStatus(),this},play:function(a){var b=jQuery(a.target),c=this.$el.find("a, .js-remove"),d=this.controller.tracks.indexOf(this.model);b.is(c)||c.find(b).length||this.controller.setCurrentTrack(d).play()},destroy:function(a){a.preventDefault(),this.model.trigger("destroy",this.model)},remove:function(){this.$el.remove()},updateCurrent:function(){this.$el.toggleClass("is-current",this.controller.currentTrack.get("id")===this.model.get("id"))},updateStatus:function(){var a="playing"===this.controller.get("status");this.$el.toggleClass("is-playing",a&&this.controller.currentTrack===this.model),this.$el.toggleClass("is-error","error"===this.model.get("status"))}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{app:"app"}],7:[function(a,b,c){(function(c){"use strict";var d,e="undefined"!=typeof window?window._:"undefined"!=typeof c?c._:null,f="undefined"!=typeof window?window.Backbone:"undefined"!=typeof c?c.Backbone:null,g=a("./volume-slider");d=f.View.extend({className:"volume-panel",tagName:"div",events:{"click .volume-toggle":"toggleMute"},initialize:function(a){this.parent=a.parent,this.controller=a.controller,this.l10n=e.extend({mute:"Mute",unmute:"Unmute"},a.l10n),this.listenTo(this.controller,"change:volume",this.updateClasses)},render:function(){return this.$el.append('<button class="volume-toggle">'+this.l10n.mute+"</button>"),this.$toggleButton=this.$el.find(".volume-toggle"),this.$el.append(new g({parent:this,controller:this.controller,playerView:this.parent.parent}).render().el),this},toggleMute:function(){var a=this.controller.get("volume")<.05?.8:0;this.controller.setVolume(a)},updateClasses:function(){var a=this.controller.get("volume")<.05;this.parent.$el.toggleClass("is-muted",a),this.$toggleButton.text(a?this.l10n.unmute:this.l10n.mute).toggleClass("is-muted",a)}}),b.exports=d}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./volume-slider":8}],8:[function(a,b,c){(function(a){"use strict";var c,d="undefined"!=typeof window?window.jQuery:"undefined"!=typeof a?a.jQuery:null,e="undefined"!=typeof window?window._:"undefined"!=typeof a?a._:null,f="undefined"!=typeof window?window.Backbone:"undefined"!=typeof a?a.Backbone:null;c=f.View.extend({className:"volume-slider",tagName:"div",events:{mousedown:"activateSlider",pointerdown:"activateSlider",touchstart:"activateSlider"},initialize:function(a){this.controller=a.controller,this.isHandleActive=!1,this.listenTo(this.controller,"change:volume",this.updateHandlePosition),e.bindAll(this,"adjustVolume","deactivateSlider"),f.$(window).on("mouseup pointerup touchend",this.deactivateSlider).on("mousemove pointermove touchmove",this.adjustVolume)},render:function(){return this.$el.append('<span class="volume-slider-handle" role="slider"></span>'),this.$handle=this.$el.find(".volume-slider-handle"),this.updateHandlePosition(),this},activateSlider:function(a){this.isHandleActive=!0,this.outerHeightOffset=(this.$el.outerHeight()-this.$el.height())/2,d(a.target).hasClass("volume-slider")&&this.controller.setVolume(1-(a.pageY-(this.$el.offset().top+this.outerHeightOffset))/this.$el.height())},adjustVolume:function(a){var b,c,d;this.isHandleActive&&(c=this.$el.height(),d=this.$el.offset().top+this.outerHeightOffset,b=d+c,a.pageY-d<0||a.pageY-b>0||this.controller.setVolume(1-(a.pageY-d)/c))},deactivateSlider:function(){this.isHandleActive=!1},updateHandlePosition:function(){this.$handle.css("top",100-100*this.controller.get("volume")+"%")}}),b.exports=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],app:[function(a,b,c){(function(a){"use strict";function c(){var a={};d.extend(this,{controllers:{},collections:{},l10n:{},models:{},players:{},routers:{},views:{}}),this.settings=function(b){return b&&d.extend(a,b),a.l10n&&(this.l10n=d.extend(this.l10n,a.l10n),delete a.l10n),a||{}}}var d="undefined"!=typeof window?window._:"undefined"!=typeof a?a._:null;b.exports=function(b){return a[b]=a[b]||new c,a[b]}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]);